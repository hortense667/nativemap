# ネイティブマップ 1.0

Copyright (c) 2025 Satoshi Endoh / @hortense667

## 概要

ネイティブマップは、年代別のイベントを視覚的に表示し、管理するためのWebアプリケーションです。縦軸に誕生年、横軸に年齢を設定し、各イベントがどの年代の人にとってどの年齢での出来事だったかを直感的に把握できます。

## ライセンス

- **データ**: [CC BY-SA 4.0](LICENSE) - Creative Commons Attribution-ShareAlike 4.0 International License
- **プログラム**: MIT License
- **お願い**: Development in progress 2025年9月現在、本格的な受け入れ体制が整うまでプルリクエストは受け付けません。

## 開発趣旨

1976に生まれた人はファミコンが発売された1983年には7歳、ゲームボーイは13歳、10代の終わりにポケベルやPHSを流行らせ、20歳となる1996年はインターネットが到来、彼らがネット業界の中核となる「76世代」となります。この年齢の人たちは、ちょっとした波あるいは崖に見えないでしょうか？　2、3年後の人たちはすでに開拓者ではなく別の視点で見ることができます。

しばしば、1990年以降の世代を「デジタルネイティブ」と呼んだり、欧米では1965年〜1980年頃生れを「ジェネレーションX」としたりします。私は、2000年代に出版グループにおいてメディアとコンテンツに関する総研のたちあげに携わりました。F1（女性20～34歳）、M2（男性35～49歳）といった消費者の性年代区分はまったく役に立たなくなっていました。もっと詳細に流れていく時間軸が必要と思いました。

そうした私のフラストレーションを解消するために作成したのが「ネイティブマップ」（2011、『ソーシャルネイティブの時代』遠藤諭著、アスキーメディアワークス刊にて言及）でした。また、開発者は現在、ITの歴史を専門として大学で教えており、歴史において重要なデータ形式として年表に注目しています。特に、ITの歴史は近代史に属し、数年という短いスパンで多くの出来事が起こり、それが人々の行動に影響を与え、新たな歴史的トピックを生み出しています。

このツールの目的は、製品・コンテンツ・サービス・歴史的な事柄を、より俯瞰的に見ることでさまざまな理解を深化させることです。最終的には、自分以外の世代を含めた時代感を頭に入れることです。そのために、インタラクティブな年表とすることで、同じ時代に他のジャンルで何が起こっていたかを見えやすく、また、それらの製品・作品・トピックに、何年生まれの人は何歳で触れたかを自在に見れるようにしています。


## 主な機能

### データ表示
- **タイムライン表示**: 年代別のイベントを縦軸（誕生年）と横軸（年齢）で表示
- **ジャンル分類**: 主要ジャンルに対応（新たにジャンルを設定することも可能）
- **重要度設定**: 1-5の重要度でイベントの重要さを設定
- **時代区分**: 基本的な時代区分に加え、放送期間や連載期間などで対象年を帯状に表示
- **検索機能**: ラベルと注釈を対象とした検索（前/次で移動）
- **フィルタ機能**: ジャンルと重要度による絞り込み

### データ管理
- **GitHub同期**: GitHub REST Contents API（GET/PUT）で読み込み・保存
- **CSV/TSV読み込み**: 一括データ追加（区切り文字を自動検出）
- **個別編集**: 詳細編集と順序のドラッグ&ドロップ
- **ローカル保存**: `localStorage` に自動保存（編集フラグ/ラベルバックアップ/鮮度タイムスタンプを含む）

### インタラクティブ機能
- **ドラッグ操作**: 誕生年の調整
- **詳細表示**: イベントの詳細情報表示
- **URL連携**: 関連URLの表示とリンク
- **時代区分**: 背景色・透明度・名称を設定し表示（コンテンツの詳細一覧からも登録可能）

## 使用方法

### 初回設定

1. **GitHub設定**:
   - 「設定」ボタンをクリック
   - `Personal Access Token`、`owner`、`repo`、`filePath`（既定は `timeline.json`）を入力
   - 管理者提供の設定情報で利用可

2. **データ同期**:
   - 「同期」ボタンでGitHubから最新データを読み取り
   - 変更保存も同ボタンで実行（書き込みには`repo`スコープのPATが必要）

### 基本的な操作

#### イベントの表示
- 左側の年表示でイベントを確認
- マウスオーバーで詳細情報を表示
- クリックで詳細一覧を表示

#### 検索とフィルタ
- **検索**: 上部の検索ボックスでラベルと注釈を検索
- **ジャンルフィルタ**: 「ジャンル選択」ボタンで複数ジャンルを選択
- **重要度フィルタ**: 重要度による絞り込み

#### データの編集
- **個別編集**: イベントをクリックして詳細一覧から編集
- **一括追加**: 「ロード」ボタンでCSV/TSVファイルを読み込み
- **新規追加**: 空の年をクリックして新規イベントを追加（または詳細一覧画面から「追加」）

### CSV/TSV読み込み形式

```
開始年;終了年;ラベル;ジャンル;重要度;URL;注釈
1946;;ENIAC;HAR;5;https://ja.wikipedia.org/wiki/ENIAC;初の大規模電子計算機
1968;1972;ど根性ガエル;MAN;3;https://ja.wikipedia.org/wiki/ど根性ガエル;昭和ギャグの代表
1996;ongoing;東京ゲームショウ;EVT;5;https://ja.wikipedia.org/wiki/東京ゲームショウ;国内最大級のゲーム見本市。
```

#### ジャンル一覧（主要 + 拡張）
- **ANI**: アニメ
- **MAN**: マンガ
- **GAM**: ゲーム
- **TVP**: テレビ番組
- **MOV**: 映画
- **NET**: インターネット
- **HAR**: ハードウェア
- **PHE**: 現象・流行
- **SOF**: ソフトウェア
- **TOY**: おもちゃ
- **FAS**: ファッション
- **BOO**: 本
- **MAG**: 雑誌
- **NOV**: 小説
- **MUS**: 音楽
- **MUS**: 音楽
- **IDL**: アイドル
- **RDO**: ラジオ
- **EVT**: イベント
- **FMT**: フォーマット
- **SPW**: スポーツ/競技
- **RDE**: 乗り物/移動
- **FOO**: 食
- **UNC**: その他
※このジャンルは設定によって容易に変更することができる。詳細は「ネイティブマップ_メンテナンスガイド.md」を参照。

#### 重要度
- **5**: 時代を代表する重要イベント
- **4**: 大きな影響を与えたイベント
- **3**: 一般的に知られているイベント
- **2**: 特定分野で重要なイベント
- **1**: 参考程度のイベント

## 技術仕様

### 対応ブラウザ
- Chrome (推奨)
- Firefox
- Safari
- Edge

### データ形式
- **保存形式**: JSON（`{ events: {YYYY: Item[]}, eraSettings: Era[] }`）
- **同期**: GitHub REST Contents API（GET/PUT）
- **ローカル保存**: `localStorage`（キー: `timelineEventsV2` 他）

### 制限事項
- **最大登録件数**: 約20,000件（推奨）
- **ファイルサイズ制限**: GitHub API制限（100MB）内
- **ブラウザ制限**: localStorage制限（5-10MB）内

## 管理者向け情報

### GitHub設定
- **リポジトリ**: hortense667/nativemap（例）
- **データファイル**: timeline.json
- **権限**: 運用ポリシーに応じて保護（ブランチ保護/レビュー必須など）

### ユーザー管理
- 一般ユーザーは管理者から提供されたPersonal Access Tokenを使用（読み取り中心。書き込みは`repo`権限が必要）
- プログラムコード（`nativemap101.html`）は自由に変更可能
- データの利用はCC BY-SA 4.0ライセンスに従う

## ローカル実行

### 前提
- Node.js 18+

### 起動
以下の手順で起動できます（3分程度）：

1. Node.js をインストール
   - 公式サイト（`https://nodejs.org`）から LTS 版をダウンロードしてインストール
   - インストール後、以下でバージョン確認
   ```
   node -v
   npm -v
   ```
2. 依存パッケージをインストール
   - プロジェクトのフォルダを開き、次を実行
   ```
   npm install
   ```
3. サーバーを起動
   ```
   npm start
   ```
   - 「サーバーが起動しました: http://localhost:8000」と表示されます
4. ブラウザで開く
   - `http://localhost:8000/nativemap101.html`

補足：
- Windows: エクスプローラーで `ネイティブマップ起動.bat` をダブルクリックでも起動可
- macOS/Linux: ターミナルで `sh start_server.sh` または `npm start`
- 別のポートで動かしたい場合は `server.js` の `PORT` を変更

トラブルシュート：
- 「コマンドが見つかりません」: Node.js のインストール/再起動、PATHを確認
- ポート競合: 他のアプリが 8000 番を使用していないか確認。必要なら `server.js` の `PORT` を変更
- 画面が真っ白: ブラウザの開発者ツール（F12）でエラーを確認、キャッシュクリア後に再読み込み

### 代替: Pythonがある場合の超簡単サーバー
Nodeを使わずに、Pythonの簡易HTTPサーバーでも動作確認できます。

1. このフォルダでサーバーを起動
   - Python 3 系:
   ```
   python -m http.server 8000
   ```
   - Python 2 系（古い環境）:
   ```
   python -m SimpleHTTPServer 8000
   ```
2. ブラウザで開く
   - `http://localhost:8000/nativemap101.html`

注意:
- Pythonの簡易サーバーは静的配信のみです。`server.js` のようなログ出力やポート変更のUIはありません。

## 貢献

## ライセンス詳細

### データの使用
このプロジェクトのtimeline.jsonデータは、CC BY-SA 4.0ライセンスの下で提供されます。以下の条件で使用できます：

- **表示**: 原作者のクレジットを表示
- **継承**: 派生作品も同じライセンスで公開
- **商用利用**: 可能
- **改変**: 可能

### プログラムの使用
プログラムコードはMIT Licenseの下で提供され、自由に使用・改変・配布できます。

## サポート

### 問題報告
- GitHub Issuesで問題を報告
- バグ報告時は、ブラウザ情報とエラーメッセージを含める

### 機能要望
- GitHub Issuesで機能要望を投稿
- 具体的な使用例と期待する動作を記載

## 更新履歴

### v1.0 (2025年)
- 初回リリース
- 基本的なタイムライン表示機能
- GitHub同期機能
- CSV/TSV読み込み機能
- 検索・フィルタ機能
- 16種類のジャンル分類

---

**ネイティブマップ** - 年代を超えたイベントの可視化ツール


